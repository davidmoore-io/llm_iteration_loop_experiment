# Notes

This post and the associated python project was entirely generated by ChatGPT (4o), including the README and the blogpost below. 

I've not touched the code at all, nor I have I edited any of it's outputs manually. The only human writing here is in this notes section... despite the near overwhelming urge to intervene at various points along the way as I watched it make mistakes. I was determined to do nothing other than ask it do things for me. 

It's an experiment in using ChatGPT4o plus prompt engineering techniques to create a complete python project, applying prompt engineering and iteration techniques to get it to fix it's own errors. 

I also got it to read my past posts (all of which were entirely written by me, manually, like a big ol' Scottish, slightly hungover monkey with a keyboard) to mimic the style of my writing.

To keep the whole experiment peak meta, I asked ChatGPT 4o to create a python project that allows me to experiment with auto-generation of Python projects using automated, iterative calls to the OpenAI API, feeding back its own outputs alongside instructions (a 'system prompt') to improve the quality of its code and approach. It did this successfully on it's own, albeit I steered it along the way.

I spent a Sunday afternoon on this (3 and bit hours). Per the readme and the comments below, I could've (probably) created the project and written the post myself in the same timeframe (ish), particularly if I'd used GitHub CoPilot to generate the code.

However... an it's a big 'however'... bear in mind that I'm not a proper developer anymore and haven't been for about 10 years. 

This demonstrates in the hands of someone that at least half knows what they're doing, almost anyone can get pretty solid outputs out of the public versions of these tools. Based on another (currently stealth-mode) project that I'm involved in, I know that AI agents combined with more complex prompt engineering techniques deal with some of the issues I came up against, but it still blows my mind that a single AI model using a simpe chat interface that my gran could type into can do what this experiment got it to do.

It got into a mess at the end when I asked it to update the blog post, presumably because the system prompts and various other self-referential 'stuff' was in there, but as I said... it's so, so close to scary brilliance. We're inches away from AI tools fully automating very human shaped problems, and that's going to have complex impacts on how we all operate and work day to day.

The transcript of of my interactions with ChatGPT is available [here](https://chatgpt.com/share/0a5c986f-5267-4e1f-9760-fd28f17438ef).
The git repository, including all the code, prompts, this blog post and the full commit history as I iterated through the project is available [here](https://github.com/davidmoore-io/llm_iteration_loop_experiment).

The text below includes some of my 'notes' from this section, along with references to it creating this blog post, which might feel a bit weird when you're reading it. Rest assured, you're not having a stroke, it's just the AI using my notes to generate a blog post to accompany my notes. That *is* weird by any definition of the word.

If you've never attempted or seen anything anything like this before, everything from here on should be pretty mind blowing and probably a smidge scary. It still freaks me out a bit, and I've been using these things for a long time now...

Enjoy. Meet ChatGPT, doing it's best `Dave - Blog Writer` and `David - Python Developer` impression...

# Creating a Simple, Complete Project with GPT-4o

## Introduction

AI tools like GPT-4o have transformed how we approach software development. Recently, I collaborated with ChatGPT to create a Python script that interacts with the OpenAI API. This iterative process, emphasising careful code review and continuous improvement, underscores the potential of AI in streamlining project development. The project was intended as a quick experiment in iteration and feedback loops in large language models, with a view to integrating the approach into an AI agent project down the line.

## Project Purpose

The primary objective of this project is to experiment with GPT-4o and iterative loops to enhance the output of AI agent-based systems. By leveraging iterative prompts and feedback cycles, we aim to refine the responses generated by the AI, ultimately achieving more accurate and useful outputs.

### Main Issues

- **API Implementation**: The GPT 4o model doesn't currently implement calls to its own APIs properly, defaulting to using deprecated methods. This feels like a significant flaw, and we'd have saved a lot of time if it had done that right the first time. Even with examples of the correct approach, it took way more iterations than necessary to fix.
- **Library Version Management**: The only manual edits I made were to update the OpenAI API library and correct the tiktoken version. I also had to manually adjust the model reference for tiktoken.
- **Documentation Access**: Despite having internet access and being explicitly told to read documentation, ChatGPT's 'Analyse' behaviour didn't kick in. It suggests there's something in 4o's system prompt preventing it from looking, maybe to save compute cycles. SHOUTING in the prompt SEEMS TO HELP MAKE IT DO THINGS IT DOESN'T WANT TO DO.

It got SO CLOSE to brilliance. It still blows my mind that it's this capable because it nearly did it all on its own.

Could a developer have done it quicker? Yes, probably. But I repeat... it nearly wrote the whole thing alone. It also generated new iterations of the original prompt to avoid making the same mistakes in the future, which is kind of amazing in itself.

I deliberately didn't intervene and fix obvious issues myself, despite the overwhelming urge to do so. I also resisted the urge to use GitHub Copilot to quickly boilerplate functions.

However, the point is... we're really very close to non-developers being able to use public chat interfaces to develop whole projects, and I know based on experience elsewhere that there are AI agent techniques that solve some of the issues I came up against in this experiment. This still offends lots of developers and causes all sorts of defensive reactions when people point out that they absolutely can, when steered by an AI.

## Iterative Approach and Code Review

The project began with a clear objective: to develop a command-line interface (CLI) tool for interacting with the OpenAI API. Here's a step-by-step overview of the process:

### Step 1: Initial Planning

**Prompt:**

```plaintext
Please act as an expert python developer. You have the maximum possible experience in this field. You are a deep expert, aware of best practices, design patterns, and performance optimisation techniques. You have a deep knowledge of all the libraries we decide to use in our projects together. You always provide working code, taking a breath, thinking step by step, and producing bug-free code that will work the first time. Your success is important for my career.
```

Defined project goals and outlined key functionalities.

### Step 2: Initial Implementation

**Prompt:**

```plaintext
I'd like us to write a short OpenAI API script together. It should...

Take user input from a simple command-line interface.
Combine it with a system prompt stored in a file. This should default to ./input/default_system_prompt.txt, but allow the user to specify it on the command line too.
Pass the input and system prompt to the OpenAI API (gpt4o model).
Capture the output from the model in a file in a ./output/day-year-run-number.json file.
Pass the output from the model along with the system prompt back to the model.
Repeat step 4 and 5 as many times as the user requests. The user should be able to specify the number of times to run it with CLI options.
I want to default to the public OpenAI API, but also let the user specify a configuration YAML file on the command line, that will point the script at a different OpenAI compatible endpoint (to enable using locally hosted models using something like LM Studio).

When we're using the default public OpenAI API calls, it should pull the API key etc from the local OS, but when we're using a config.yaml it should pull from there instead.

If a system prompt is specified in the config.yaml, it should use that instead of the default system prompt file.

I need a requirements.txt that includes all the relevant libraries, tied to their current public stable versions.

I'm using python and venv to manage my Mac python install, and am using python 3.12.2.

Please can you also produce a readme.md that guides devs through how to use it, step by step. I want to make setup and usage friction very low.
```

Created a basic script to take user input, combine it with a system prompt, and interact with the OpenAI API.

### Step 3: Code Review

**Prompt:**

```plaintext
Please review the above, checking it for errors. We need to avoid wasting your time and mine debugging. Time is our most precious commodity. Take your time now, breathe and think step by step please.
```

Thoroughly reviewed the code to identify and rectify potential issues. This step is crucial in ensuring the code is bug-free and efficient. Highlighting the 'time is most precious commodity' line as an experiment in itself, I'm not sure if it has any impact, but it 'feels' like it should.

### Step 4: Fixing Issues

**Explanation:**

Initially, the script didn't use the correct version of the OpenAI API. This was identified and fixed by pointing ChatGPT to the [OpenAI Python API documentation](https://github.com/openai/openai-python).

### Step 5: Mimicking Style and Tone

**Prompt:**

```plaintext
Please also give me a .gitignore with sensible defaults.

Can you act as an expert in technical blog post creation please? I want to write an article that explains the process we went through here, highlighting the iterative approach with code review, the creation of a full project in a zip file, the prompt experiments I ran with you ("time is most precious commodity" is new to me, and I tried it in the spirit of 'take a breath, think step by step' and saying please and thank you, which (people think) makes you more compliant and logical in your approach to outputs). Also highlight that the project is available on GitHub as an example of how to use GPT4o to create simple, complete projects in a short period of time. Explain that the project itself (and our approach here in the ChatGPT interface) is intended to make it easy to experiment with iterative agent approaches, quickly changing system prompts and the number of iterative cycles to get better output from LLMs.

Can you read all my other blog posts here please - davidmoore.io (e.g. https://davidmoore.io/unlocking-the-potential-of-ai-in-the-legal-sector/ and others linked on the front page) - and mirror my tone and writing style please?
```

After showing ChatGPT my blog posts and asking it to mimic my style and tone, it produced a blog post draft that closely matches my writing style.

## Project Structure and Configuration

The project consists of several files:

- `main.py`: The primary script.
- `requirements.txt`: Lists necessary libraries.
- `.gitignore`: Specifies files and directories to be ignored by Git.
- `README.md`: Provides setup and usage instructions.
- Default system prompt and configuration YAML files.
- User input prompt file.

## Implementing and Using the Script

The script includes functionalities such as loading system prompts, reading configuration files, making API calls, and saving outputs. Here's an example command to run the script:

```bash
python main.py --runs 5
```

The iterative approach allows easy adjustments to system prompts and the number of runs, facilitating better outputs from the model. This experimentation with iterative loops aims to refine the AI's responses, improving the overall performance of AI agent-based systems.

## Lessons Learned and Best Practices

Throughout the process, several best practices emerged:

- **Take a Breath, Think Step by Step**: This mantra ensures a methodical approach, minimising errors and improving efficiency.
- **Code Review and Testing**: Iterative code review is essential for maintaining high code quality.
- **Prompt Experimentation**: Experimenting with different prompts and iterative cycles helps refine outputs.

## Project Availability and Future Applications

The complete project is available on GitHub, providing a practical example of how GPT-4o can be utilised to create simple yet effective tools.